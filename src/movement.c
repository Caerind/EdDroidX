/*
 * movement.c
 *
 *  Created on: 13 janv. 2018
 *      Author: Cmdu76
 */

#include <msp430.h>
#include "utils.h"
#include "chassis.h"
#include "movement.h"

///////////////////////////////////////////////////////////////
// Avance avec une vitesse et un temps donnés                //
///////////////////////////////////////////////////////////////
void move(unsigned int time, unsigned int speed)
{
	ch_move(speed);
	ut_delay(time);
	ch_stop();
}

///////////////////////////////////////////////////////////////
// Tourne vers la droite avec une vitesse et un temps donnés //
///////////////////////////////////////////////////////////////
void right(unsigned int time, unsigned int speed)
{
	ch_move(speed);
	ch_rotateRight();
	ut_delay(time);
	ch_stop();
}

///////////////////////////////////////////////////////////////
// 90° vers la droite avec le robot spécifié                 //
///////////////////////////////////////////////////////////////
void rightRobot(unsigned int robotId)
{
	if (robotId == 1) // Fastest robot
	{
		right(346, 21);
	}
	else
	{
		right(560, 72);
	}
}

///////////////////////////////////////////////////////////////
// Tourne vers la gauche avec une vitesse et un temps donnés //
///////////////////////////////////////////////////////////////
void left(unsigned int time, unsigned int speed)
{
	ch_move(speed);
	ch_rotateLeft();
	ut_delay(time);
	ch_stop();
}

///////////////////////////////////////////////////////////////
// 90° vers la gauche avec le robot spécifié                 //
///////////////////////////////////////////////////////////////
void leftRobot(unsigned int robotId)
{
	if (robotId == 1) // Fastest robot
	{
		left(346, 21);
	}
	else
	{
		left(560, 72);
	}
}

///////////////////////////////////////////////////////////////
// Attends une certain nombre de millisecondes               //
///////////////////////////////////////////////////////////////
void delay(unsigned int ms)
{
	ut_delay(ms);
}

///////////////////////////////////////////////////////////////
// Arrête les moteurs                                        //
///////////////////////////////////////////////////////////////
void stop()
{
	ch_stop();
}
